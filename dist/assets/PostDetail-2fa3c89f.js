var b=(k,f,n)=>new Promise((c,t)=>{var _=o=>{try{d(n.next(o))}catch(i){t(i)}},h=o=>{try{d(n.throw(o))}catch(i){t(i)}},d=o=>o.done?c(o.value):Promise.resolve(o.value).then(_,h);d((n=n.apply(k,f)).next())});import{ak as V,aj as H,r as w,j as L,a8 as u,ac as T,m as v,q as g,t as e,H as a,B as l,C as j,A as q,u as C,F as m}from"./vue-vendor-003ac6f9.js";import{P as x,Q as p,U as z,V as E}from"./element-plus-ec987f8a.js";import{s as I}from"./supabase-6fa7b02d.js";import{_ as R}from"./_plugin-vue_export-helper-c27b6911.js";import"./index-e40cfe8c.js";const S={class:"post-detail"},A={class:"page-header"},F={key:0,class:"post-content"},Q={class:"post-header"},U={class:"post-title"},$={class:"post-meta"},G={class:"author"},J={class:"date"},K={class:"views"},O={class:"post-body"},W={class:"content-section"},X=["innerHTML"],Y={class:"post-actions"},Z={key:1,class:"no-data"},tt={__name:"PostDetail",setup(k){const f=V(),n=H(),c=w(!1),t=w(null),_=f.params.id,h=r=>new Date(r).toLocaleString("zh-CN"),d=()=>b(this,null,function*(){try{c.value=!0;const{data:r,error:s}=yield I.from("posts").select("*").eq("id",_).single();if(s){console.error("获取文章详情失败:",s),x.error("获取文章详情失败");return}t.value=r}catch(r){console.error("加载文章详情失败:",r),x.error("加载文章详情失败")}finally{c.value=!1}}),o=()=>{n.push(`/posts/edit/${_}`)},i=()=>{n.push("/posts")};return L(()=>{_&&d()}),(r,s)=>{const D=u("el-icon"),y=u("el-button"),B=u("el-tag"),P=u("el-empty"),M=u("el-card"),N=T("loading");return v(),g("div",S,[e("div",A,[a(y,{onClick:i,type:"primary",size:"small"},{default:l(()=>[a(D,null,{default:l(()=>[a(C(z))]),_:1}),s[0]||(s[0]=m(" 返回 ",-1))]),_:1}),s[1]||(s[1]=e("h2",null,"文章详情",-1))]),j((v(),q(M,null,{default:l(()=>[t.value?(v(),g("div",F,[e("div",Q,[e("h1",U,p(t.value.title),1),e("div",$,[e("span",G,"作者: "+p(t.value.username||t.value.author||t.value.author_name||"匿名作者"),1),e("span",J,"发布时间: "+p(h(t.value.created_at)),1),e("span",K,"文章点赞量: "+p(t.value.views||0),1),a(B,{type:t.value.status==="published"?"success":"warning"},{default:l(()=>[m(p(t.value.status==="published"?"已发布":"草稿"),1)]),_:1},8,["type"])])]),e("div",O,[e("div",W,[s[2]||(s[2]=e("h3",null,"文章内容",-1)),e("div",{class:"content",innerHTML:t.value.content||"暂无内容"},null,8,X)]),e("div",Y,[a(y,{type:"primary",onClick:o},{default:l(()=>[a(D,null,{default:l(()=>[a(C(E))]),_:1}),s[3]||(s[3]=m(" 编辑文章 ",-1))]),_:1}),a(y,{onClick:i},{default:l(()=>[...s[4]||(s[4]=[m(" 返回列表 ",-1)])]),_:1})])])])):(v(),g("div",Z,[a(P,{description:"文章不存在或已被删除"})]))]),_:1})),[[N,c.value]])])}}},it=R(tt,[["__scopeId","data-v-1574b669"]]);export{it as default};
